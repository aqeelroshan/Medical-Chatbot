<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Clinica Chatbot</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <div class="page-wrapper">

        <!-- CHATBOT -->
        <div class="chat-box">

            <!-- HEADER -->
            <div class="chat-header">
                <img src="https://cdn-icons-png.flaticon.com/512/387/387569.png" class="bot-icon" alt="Clinica">
                <div>
                    <h6>Clinica</h6>
                    <span>Online â€¢ Medical Assistant</span>
                </div>
            </div>

            <!-- CHAT BODY -->
            <div id="chatBody" class="chat-body"></div>

            <!-- INPUT -->
            <form id="messageArea" class="chat-input">
                <input type="text" id="text" name="msg" placeholder="Ask a health-related question..."
                    autocomplete="off" required>
                <button type="submit">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </form>

        </div>

    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <script>
        $(document).ready(function () {

            // Initial bot message
            $("#chatBody").append(`
        <div class="message bot">
            <img src="https://cdn-icons-png.flaticon.com/512/387/387569.png">
            <div class="bubble">
                Hi, I am <strong>Clinica</strong>. How can I help you?
            </div>
        </div>
    `);

            $("#messageArea").on("submit", function (event) {
                event.preventDefault();

                let userText = $("#text").val();
                $("#text").val("");

                $("#chatBody").append(`
            <div class="message user">
                <div class="bubble">${userText}</div>
            </div>
        `);

                $("#chatBody").scrollTop($("#chatBody")[0].scrollHeight);

                $.ajax({
                    type: "POST",
                    url: "/get",
                    data: { msg: userText }
                }).done(function (data) {

                    $("#chatBody").append(`
                <div class="message bot">
                    <img src="https://cdn-icons-png.flaticon.com/512/387/387569.png">
                    <div class="bubble">${data}</div>
                </div>
            `);

                    $("#chatBody").scrollTop($("#chatBody")[0].scrollHeight);
                });
            });

        });
    </script>

</body>

</html>